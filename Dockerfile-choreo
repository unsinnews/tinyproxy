# Use the official Ubuntu base image
FROM ollama/ollama

# Create choreo user with specific UID
# RUN addgroup --gid 10014 choreo && \
#     adduser --disabled-password --no-create-home --uid 10014 --ingroup choreo choreouser


# Set working directory
WORKDIR /root/.ollama

# Set permissions for choreo user
RUN chown -R 10014:10014 /root/.ollama

# Set environment variables
ENV OLLAMA_HOST=0.0.0.0

# Expose port
EXPOSE 11434

# Switch to choreo user
USER 10014

ENTRYPOINT ["/app/ollama"]
CMD ["serve"]
