FROM ajoergensen/tinyproxy

# Create user and group
RUN addgroup --gid 10014 choreo && \
    adduser --disabled-password --no-create-home --uid 10014 --ingroup choreo choreouser

# Set permissions for tinyproxy
RUN mkdir -p /var/run/tinyproxy && \
    mkdir -p /var/log/tinyproxy && \
    chown -R 10014:10014 /etc/tinyproxy /var/run/tinyproxy /var/log/tinyproxy

EXPOSE 8888
USER 10014
CMD ["/usr/bin/tinyproxy", "-d"]
